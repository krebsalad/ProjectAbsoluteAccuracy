<launch>

  <arg name="robot_ip" default="172.22.31.3"/>
  <arg name="rviz_planner" default="true"/>
  <arg name="camera_launch" default="false"/>
  <arg name="enable_calibration_offsets" default="false"/>
  <arg name="camera_launcher_arg" default="none"/>

  <!-- Launch 3D sensors -->
  <!-- camera launch -->
  <!-- launch camera, with or without replugging, run the script with arg camera_launcher_arg "replug" -->
  <group if="$(arg camera_launch)">
      <node pkg="fieldlab_cel3_calib" type="realsense_camera_launcher.py" name="realsense_camera_launcher" args="$(arg camera_launcher_arg)" output="screen" required="true" launch-prefix="xterm -e"/>
  </group>

    <!-- load calibration offsets, this must be called after robot description is loaded and before robot_interface_download nodes are run-->
  <group if="$(arg enable_calibration_offsets)">
    <node name="load_joint_offsets" pkg="abb_robot_calibration" type="load_joint_offsets.py"/>
  </group>

  <!-- robot definitions. will load robot description to /robot_description -->
  <include file="$(find abb_irb1660_moveit_config)/launch/planning_context.launch" >
    <arg name="load_robot_description" value="true" />
  </include>

  <!-- link to abb_driver/industrial_robot_client for connection with actual robot-->
  <include file="$(find abb_irb1660_support)/launch/robot_interface_download_irb1660.launch" >
      <arg name="robot_ip" value="$(arg robot_ip)"/>
  </include>
  
  <!-- publishes /joint_states-->
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" />

  <!-- moveit params -->
  <include file="$(find abb_irb1660_moveit_config)/launch/move_group.launch">
    <arg name="publish_monitored_planning_scene" value="true" />
  </include>

  <!-- vizualize -->
  <include file="$(find abb_irb1660_moveit_config)/launch/moveit_rviz.launch" if="$(arg rviz_planner)">
    <arg name="config" value="true"/>
  </include>


</launch>
